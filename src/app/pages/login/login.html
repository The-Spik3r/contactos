<main class="login-container">
  <div class="title-container">
    <div class="title">
      <h1>LOADING</h1>
      <h2>- BOOTING SYSTEM...</h2>
    </div>
    <div>
      <app-loader></app-loader>
    </div>
  </div>
  @if (!gonnaLogin) {
  <div id="messages-container">
    <div class="messages-boots">
      @for (item of messageSeems; track $index) {
      <p>{{ item }}</p>
      }
    </div>
    <div class="messages-error">
      @for (item of messageErrorSeems; track $index) {
      <p class="error">{{ item }}</p>
      }
    </div>
  </div>
  } @if (gonnaLogin) {
  <div class="messages-boots">
    <p>{{ isSignUpMode ? 'Create new account' : 'Please enter your credentials' }}</p>

    @if (loginStep === 'email') {
    <div class="terminal-input-container">
      <span class="terminal-prompt">Email: </span>
      <input
        type="email"
        #emailInput
        [(ngModel)]="email"
        (keydown.enter)="onEmailSubmit()"
        class="terminal-input"
        placeholder="user@example.com"
        autofocus
      />
    </div>
    <div class="terminal-actions">
      <button (click)="toggleSignUpMode()" class="toggle-mode-btn">
        {{ isSignUpMode ? '← Back to Login' : 'Create Account →' }}
      </button>
    </div>
    }

    @if (loginStep === 'firstName') {
    <div class="terminal-history">
      <span class="terminal-prompt">Email: </span>
      <span class="terminal-value">{{ email }}</span>
    </div>
    <div class="terminal-input-container">
      <span class="terminal-prompt">First Name: </span>
      <input
        type="text"
        #firstNameInput
        [(ngModel)]="firstName"
        (keydown.enter)="onFirstNameSubmit()"
        class="terminal-input"
        placeholder="John"
        autofocus
      />
    </div>
    }

    @if (loginStep === 'lastName') {
    <div class="terminal-history">
      <span class="terminal-prompt">Email: </span>
      <span class="terminal-value">{{ email }}</span>
    </div>
    <div class="terminal-history">
      <span class="terminal-prompt">First Name: </span>
      <span class="terminal-value">{{ firstName }}</span>
    </div>
    <div class="terminal-input-container">
      <span class="terminal-prompt">Last Name: </span>
      <input
        type="text"
        #lastNameInput
        [(ngModel)]="lastName"
        (keydown.enter)="onLastNameSubmit()"
        class="terminal-input"
        placeholder="Doe"
        autofocus
      />
    </div>
    }

    @if (loginStep === 'password') {
    <div class="terminal-history">
      <span class="terminal-prompt">Email: </span>
      <span class="terminal-value">{{ email }}</span>
    </div>
    @if (isSignUpMode) {
    <div class="terminal-history">
      <span class="terminal-prompt">First Name: </span>
      <span class="terminal-value">{{ firstName }}</span>
    </div>
    <div class="terminal-history">
      <span class="terminal-prompt">Last Name: </span>
      <span class="terminal-value">{{ lastName }}</span>
    </div>
    }
    <div class="terminal-input-container">
      <span class="terminal-prompt">Password: </span>
      <input
        type="password"
        #passwordInput
        [(ngModel)]="password"
        (keydown.enter)="onPasswordSubmit()"
        class="terminal-input"
        placeholder="••••••••"
        autofocus
      />
    </div>
    }

    @if (loginStep === 'processing') {
    <div class="terminal-history">
      <span class="terminal-prompt">Email: </span>
      <span class="terminal-value">{{ email }}</span>
    </div>
    <div class="terminal-history">
      <span class="terminal-prompt">Password: </span>
      <span class="terminal-value">••••••••</span>
    </div>
    <div class="terminal-processing">
      <p>Authenticating...</p>
    </div>
    }

    @if (loginStep === 'signup-processing') {
    <div class="terminal-history">
      <span class="terminal-prompt">Email: </span>
      <span class="terminal-value">{{ email }}</span>
    </div>
    <div class="terminal-history">
      <span class="terminal-prompt">First Name: </span>
      <span class="terminal-value">{{ firstName }}</span>
    </div>
    <div class="terminal-history">
      <span class="terminal-prompt">Last Name: </span>
      <span class="terminal-value">{{ lastName }}</span>
    </div>
    <div class="terminal-history">
      <span class="terminal-prompt">Password: </span>
      <span class="terminal-value">••••••••</span>
    </div>
    <div class="terminal-processing">
      <p>Creating account...</p>
    </div>
    }

    @if (loginStep === 'signup-success') {
    <div class="terminal-history">
      <span class="terminal-prompt">Email: </span>
      <span class="terminal-value">{{ email }}</span>
    </div>
    <div class="terminal-history">
      <span class="terminal-prompt">First Name: </span>
      <span class="terminal-value">{{ firstName }}</span>
    </div>
    <div class="terminal-history">
      <span class="terminal-prompt">Last Name: </span>
      <span class="terminal-value">{{ lastName }}</span>
    </div>
    <div class="terminal-history">
      <span class="terminal-prompt">Password: </span>
      <span class="terminal-value">••••••••</span>
    </div>
    <div class="terminal-success">
      <p class="success">✓ Account created successfully! Redirecting to login...</p>
    </div>
    }

    @if (loginStep === 'error') {
    <div class="terminal-history">
      <span class="terminal-prompt">Email: </span>
      <span class="terminal-value">{{ email }}</span>
    </div>
    <div class="terminal-history">
      <span class="terminal-prompt">Password: </span>
      <span class="terminal-value">••••••••</span>
    </div>
    <div class="terminal-error">
      <p class="error">
        {{
          isSignUpMode
            ? 'Registration failed. Please try again.'
            : 'Authentication failed. Please try again.'
        }}
      </p>
    </div>
    <div class="terminal-input-container">
      <span class="terminal-prompt">Email: </span>
      <input
        type="email"
        #emailInputRetry
        [(ngModel)]="email"
        (keydown.enter)="onEmailSubmit()"
        class="terminal-input"
        placeholder="user@example.com"
        autofocus
      />
    </div>
    }
  </div>
  }
</main>
