<main class="login-container">
  <div class="title-container">
    <div class="title">
      <h1>LOADING</h1>
      <h2>- BOOTING SYSTEM...</h2>
    </div>
    <div>
      <app-loader></app-loader>
    </div>
  </div>
  @if (!gonnaLogin) {
  <div id="messages-container">
    <div class="messages-boots">
      @for (item of messageSeems; track $index) {
      <p>{{ item }}</p>
      }
    </div>
    <div class="messages-error">
      @for (item of messageErrorSeems; track $index) {
      <p class="error">{{ item }}</p>
      }
    </div>
  </div>
  } @if (gonnaLogin) {
  <div class="messages-boots">
    <p>Please enter your credentials</p>

    <!-- Mostrar prompt de email -->
    @if (loginStep === 'email') {
    <div class="terminal-input-container">
      <span class="terminal-prompt">Email: </span>
      <input
        type="email"
        #emailInput
        [(ngModel)]="email"
        (keydown.enter)="onEmailSubmit()"
        class="terminal-input"
        placeholder="user@example.com"
        autofocus
      />
    </div>
    }

    <!-- Mostrar email confirmado y prompt de password -->
    @if (loginStep === 'password') {
    <div class="terminal-history">
      <span class="terminal-prompt">Email: </span>
      <span class="terminal-value">{{ email }}</span>
    </div>
    <div class="terminal-input-container">
      <span class="terminal-prompt">Password: </span>
      <input
        type="password"
        #passwordInput
        [(ngModel)]="password"
        (keydown.enter)="onPasswordSubmit()"
        class="terminal-input"
        placeholder="••••••••"
        autofocus
      />
    </div>
    }

    <!-- Mostrar ambos valores y procesar login -->
    @if (loginStep === 'processing') {
    <div class="terminal-history">
      <span class="terminal-prompt">Email: </span>
      <span class="terminal-value">{{ email }}</span>
    </div>
    <div class="terminal-history">
      <span class="terminal-prompt">Password: </span>
      <span class="terminal-value">••••••••</span>
    </div>
    <div class="terminal-processing">
      <p>Authenticating...</p>
    </div>
    }

    <!-- Mostrar error si falla la autenticación -->
    @if (loginStep === 'error') {
    <div class="terminal-history">
      <span class="terminal-prompt">Email: </span>
      <span class="terminal-value">{{ email }}</span>
    </div>
    <div class="terminal-history">
      <span class="terminal-prompt">Password: </span>
      <span class="terminal-value">••••••••</span>
    </div>
    <div class="terminal-error">
      <p class="error">Authentication failed. Please try again.</p>
    </div>
    <div class="terminal-input-container">
      <span class="terminal-prompt">Email: </span>
      <input
        type="email"
        #emailInputRetry
        [(ngModel)]="email"
        (keydown.enter)="onEmailSubmit()"
        class="terminal-input"
        placeholder="user@example.com"
        autofocus
      />
    </div>
    }
  </div>
  }
</main>
